<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <select id="modalidade">
      <option value="semModalidade" selected disabled>
        Escolha a modalidade
      </option></select
    ><br />
    <select id="curso">
      <option value="semCurso" selected disabled>Escolha seu curso</option>
    </select>
    <br />
    <select id="cidade">
      <option value="semCidade" selected disabled>
        Escolha a cidade
      </option></select
    ><br />
    <select id="unidade">
      <option value="semUnidade" selected disabled>
        Escolha a unidade
      </option></select
    ><br />
    <p id="demo"></p>
    <a href="" target="_blank">SAIBA MAIS</a>
  </body>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script>
    $(document).ready(function () {
      $.getJSON("data.json", function (data) {
        $.each(data, function (i, obj) {
          console.log(obj);
          $("#modalidade").append(
            $("<option>", {
              value: obj.valor,
              text: obj.titulo,
            })
          );
        });

        $("#modalidade").change(function () {
          //Pegando o novo valor selecionado no combo
          var valor = $(this).val();
          if (valor == "ibmecOnline") {
            $("#cidade").hide();
            $("#unidade").hide();
          } else {
            $("#cidade").show();
            $("#unidade").show();
          }
          console.log("valor: " + valor);
          $.getJSON("data.json", function (data) {
            $.each(data, function (i, obj) {
              console.log("obj: ", obj);
              if (valor === obj.valor) {
                var dados = obj.data;
                $("#curso option").remove();
                $("#curso").append(
                  $("<option>", {
                    value: "semCurso",
                    text: "Escolha seu curso",
                    selected: true,
                    disabled: true,
                  })
                );
                $.each(dados, function (i, curso) {
                  console.log("curso", curso);
                  $("#curso").append(
                    $("<option>", {
                      value: i,
                      text: curso.NomeCurso,
                    })
                  );
                  $("#curso").change(function () {
                    var cursoSelecionado = $("#curso :selected").text();
                    if (cursoSelecionado === curso.NomeCurso) {
                      $("a").attr("href", curso.link);
                    }
                  });
                });
              }
            });
          });
          // carregaCombo2(curso);
        });
      });
    });
  </script>
</html>
