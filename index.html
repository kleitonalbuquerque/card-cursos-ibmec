<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <select id="modalidade"></select
    ><br />
    <select id="cidade"></select
    ><br />
    <select id="unidade"></select
    ><br />
    <select id="curso"></select>
    <p id="demo"></p>
    <a href="" target="_blank">SAIBA MAIS</a>
  </body>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script>
    $(document).ready(function () {
      $.getJSON("data.json", function (data) {
        $.each(data, function (i, obj) {
          console.log(obj);
          $("#modalidade").append(
            $("<option>", {
              value: obj.valor,
              text: obj.titulo,
            })
          );
        });

        $("#modalidade").change(function () {
          //Pegando o novo valor selecionado no combo
          var valor = $(this).val();
          $.getJSON("data.json", function (data) {
            $.each(data, function (i, obj) {
              console.log("valor", valor);
              if (valor === obj.valor) {
                var dados = obj.data;
                if (valor === "ibmecOnline") {
                  $.each(dados, function (i, curso) {
                    $("#curso").append(
                      $("<option>", {
                        value: i,
                        text: curso.nome,
                      })
                    );
                    $("#curso").change(function () {
                      var cursoSelecionado = $("#curso :selected").text();
                      if (cursoSelecionado === curso.nome) {
                        $("a").attr("href", curso.link);
                      }
                    });
                  });
                } else {
                  $.each(dados, function (i, estados) {
                    var listaTodosCursos = [];
                    var listaCursos = estados.listaCursos;
                    $.each(listaCursos, function (i, cursos) {
                      cursos.forEach((element) => {
                        console.log(element);
                      });
                      /*$("#cidade").append(
                            $("<option>", {
                              value: element.CodMunicipio,
                              text: element.NomeMunicipio,
                            })
                          );
                          $("#cidade").change(function () {
                            var cidadeSelecionado =
                              $("#cidade :selected").text();
                            if (cidadeSelecionado === curso.nome) {
                              $("a").attr("href", curso.link);
                            }
                          });*/
                    });
                  });
                }
              }
            });
          });
        });
      });
    });
  </script>
</html>
